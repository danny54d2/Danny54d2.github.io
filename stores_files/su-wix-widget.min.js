function getQueryStringParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+n+"=([^&#]*)",r=new RegExp(i,"i"),t=r.exec(window.location.search);return t==null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function QueryStringToJSON(){var t=location.search.slice(1).split("&"),n={};return t.forEach(function(t){t=t.split("=");n[t[0]]=decodeURIComponent(t[1]||"")}),JSON.parse(JSON.stringify(n))}function setSize(n){var t=n.split(","),r=parseInt(t[1]),i=parseInt(t[2]);typeof Wix!="undefined"&&Wix.setHeight(i)}var QueryString=QueryStringToJSON();$(document).ready(function(){function n(t){$.each(t,function(t,i){CWS.sitePagesTitles[i.id]=i.title;typeof i.subPages!="undefined"&&i.subPages!=null&&n(i.subPages)})}CWS.viewMode=Wix.Utils.getViewMode();CWS.viewMode=="editor"&&(Wix.addEventListener(Wix.Events.COMPONENT_DELETED,function(){$.ajax({url:CWS.deleteWidgetUrl,data:{clientId:CWS.clientId,instance:QueryString.instance,compId:QueryString.compId},type:"POST",success:function(){},error:function(){}});$.ajax({url:CWS.logActionUrl,data:$.extend(CWS.logData,{action:"WidgetDeleted"}),type:"GET",success:function(){},error:function(){}})}),Wix.addEventListener(Wix.Events.SITE_PUBLISHED,function(){Wix.getSiteInfo(function(n){n.baseUrl!=CWS.siteUrl&&$.ajax({url:CWS.updateWidgetUrl,data:{clientId:CWS.clientId,instance:QueryString.instance,compId:QueryString.compId,baseUrl:n.baseUrl},type:"POST",success:function(){CWS.logData.clientSiteUrl=n.baseUrl;CWS.siteUrl=n.baseUrl},error:function(){}})});$.ajax({url:CWS.sitePublishedUrl,data:{clientId:CWS.clientId,instance:QueryString.instance,compId:QueryString.compId},type:"POST",success:function(){},error:function(){}});$.ajax({url:CWS.logActionUrl,data:$.extend(CWS.logData,{action:"WidgetPublished"}),type:"GET",success:function(){},error:function(){}})}),Wix.addEventListener(Wix.Events.SETTINGS_UPDATED,function(n){n.navigationRequest!==null&&typeof n.navigationRequest!="undefined"?typeof Wix!="undefined"&&Wix.navigateToPage(n.navigationRequest):SphereUp.SphereUpWidget.updateSettings(n)}));Wix.getSiteInfo(function(n){CWS.viewMode=="editor"&&n.baseUrl!=CWS.siteUrl&&$.ajax({url:CWS.updateWidgetUrl,data:{clientId:CWS.clientId,instance:QueryString.instance,compId:QueryString.compId,baseUrl:n.baseUrl},type:"POST",success:function(){CWS.logData.clientSiteUrl=n.baseUrl;CWS.siteUrl=n.baseUrl},error:function(){}});CWS.siteTitle=n.pageTitle});Wix.getSitePages(function(t){CWS.sitePagesTitles={};n(t)});Wix.addEventListener(Wix.Events.PAGE_NAVIGATION,function(n){if(typeof CWS.sitePagesTitles!="undefined"&&CWS.sitePagesTitles!=null){var t=CWS.sitePagesTitles[n.toPage];typeof t!="undefined"&&t!=null&&(CWS.siteTitle=t,CWS.logData.clientPageTitle=t,SphereUp.SphereUpWidget.setPageTitle("setTitle^"+CWS.siteTitle,!1))}});Wix.PubSub.subscribe("su_search_changed_"+CWS.clientId,function(n){$("#su_w_s_search_input").val($.trim(n.data.value))});$(SphereUp.SphereUpWidget).bind("MessageToParent",function(n,t){var r,i;t=="destroyLoading"?($("#su_w_s_widget").addClass("su_wix"),r=(new Date).getTime()-CWS.WidgetStartLoadTime,SphereUp.SphereUpWidget.setPageTitle("setTitle^"+CWS.siteTitle+"^"+r+"^Wix.1.0")):t=="ready"?(i=getQueryStringParameterByName("supq"),typeof i!="undefined"&&i.length>0&&SphereUp.SphereUpWidget.search(i)):t.indexOf("SetInitialSize")>=0&&setSize(t)});var t=$.extend({clientId:CWS.clientId,Design_Mode:CWS.viewMode=="editor",onClick:function(n){if(typeof Wix!="undefined")try{typeof n=="undefined"&&(n="");Wix.openModal(CWS.popupUrl+"&supq="+encodeURIComponent(n)+"&pageTitle="+encodeURIComponent(CWS.siteTitle),CWS.popUpWidth,CWS.popUpHeight,SphereUp.SphereUpWidget.logPopupClosed);SphereUp.SphereUpWidget.minimizeWidget(!0)}catch(t){}}},QueryString);SphereUp.SphereUpWidget.startWidget(t)});